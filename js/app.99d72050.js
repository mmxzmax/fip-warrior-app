(function(){"use strict";var e={2406:function(e,a,n){var l=n(5130),t=(n(4114),n(8111),n(116),n(7588),n(1701),n(4979),n(4603),n(7566),n(8721),n(6768)),i=n(144),o=n(4232),u=n(477),c=n(9812),s=n(4861),r=n(4127),d=n(9182),v=n(1427),p=n(1807),f=n(3848),m=n(514),h=n(3441),g=n(8364),b=n(4943),k=n(9398),y=n(8420),w=n(4373),R=n(3830),A=n(830),F=n(3841),C=n(211),_=n(4837);const L="fip-warrior-app",X="cats",j=(0,_.P2)(L,1,{upgrade(e){e.createObjectStore(X)}});async function P(e){return(await j).get(X,e)}async function W(e,a){return(await j).put(X,a,e)}async function $(e){return(await j).delete(X,e)}async function x(){return(await j).getAllKeys(X)}const V={class:"app-content"},E={class:"app-main"},O={class:"app-injection-field"},z={class:"app-cat-profile"},D={class:"app-cat-profile"},S={class:"app-cat-profile"},U={class:"app-cat-profile"},K={class:"app-cat-profile"},Q={class:"app-cat-profile"},I={class:"app-schema"},q=["src"];var N={__name:"App",setup(e){const a=(0,C.S)(),n=(0,R.d)(),l=[1,4,5,2,3,6],_=(0,i.KR)(!1),L=(0,i.KR)(!1),X=(0,i.KR)(""),j=(0,i.KR)(""),N=(0,i.KR)(0),T=(0,i.KR)([]);let M=0,B=(0,i.KR)([]);const G=(0,t.EW)((()=>te()));async function H(e=!1){const a=new URL(window.location.href);if(e){const{guid:e,name:n,weight:l,num:t,gs:i,dayDoze:o,schema:u,points:c}=G.value,s=`${e}|${n}|${l}|${t}|${i}|${o}|${u.join(",")}|${c?.find((e=>e.active))?.value}`;a.searchParams.set("add",btoa(encodeURIComponent(s)))}j.value=a.toString(),X.value=await y.toDataURL(j.value),L.value=!0}async function J(){await navigator.clipboard.writeText(j.value),n.add({severity:"success",summary:"Успех",detail:"url Скопирован",life:3e3})}async function Y(){const e=await w.A.get("https://www.uuidgenerator.net/api/version4");return e.data}async function Z(e={guid:null,name:"",weight:null,num:1,gs:30,dayDoze:8,schema:[...l],activePoint:1},a=!0){const n=T.value?.length?T.value?.map((e=>e.id)).sort().reverse()[0]+1:0;T.value.push({id:n,guid:e.guid??await Y(),name:e.name,weight:e.weight,num:e.num,gs:e.gs,dayDoze:e.dayDoze,schema:e.schema,points:ne(e.schema,e.activePoint)}),await ae(),N.value=n,a&&(_.value=!0)}function ee(e){if(void 0===e)return;const l=T.value.findIndex((a=>a.id==e)),t=T.value[l].guid,i=T.value[l].name;a.require({message:`Удалить питомца ${i} ?`,header:"Подтвердите удаление",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Отмена",severity:"secondary",outlined:!0},acceptProps:{label:"Удалить"},accept:async()=>{_.value=!1,T.value.splice(l,1),await $(t),N.value=T.value[0]?.id??0,await ae(),n.add({severity:"success",summary:"Удаление успешно",detail:`Питомец ${i} удален`,life:3e3})}})}async function ae(e){e&&(T.value.forEach((e=>{const a=[];e.schema.forEach(((n,l)=>{const t=e.schema.findIndex((e=>e==l+1));-1!==t&&a.push(t+1)})),e.schema=a,B.value?.length&&e.points.forEach((a=>{a.active=a.value==e.schema[0]}))})),B.value=[]);for(let a of T.value){const{guid:e,...n}=a;await W(e,{...n,points:n.points.map((e=>({...e}))),schema:n.schema.map((e=>e))})}e&&(_.value=!1)}function ne(e,a=1){const n=[];for(let l=0;l<e.length;l++)n.push({active:a==l+1,value:l+1,visible:!0,disabled:!1});return n}async function le(){const e=await x(),l=[];for(let a of e){const e=await P(a);l.push({guid:a,...e})}T.value=l.reverse(),N.value=T.value[0]?.id??0;const t=new URLSearchParams(window.location.search),i=t.get("add");if(window.history.pushState({},document.title,window.location.pathname),i){const[e,t,o,u,c,s,r,d]=decodeURIComponent(atob(i)).split("|"),v={guid:e,name:t,weight:o,num:u,gs:c,dayDoze:s,schema:r.split(",").map((e=>+e)),activePoint:d},p=l.find((e=>e.guid==v.guid));p?a.require({message:`Питомец ${v.name} уже существует, обновить?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Отменить",severity:"secondary",outlined:!0},acceptProps:{label:"Обновить"},accept:async()=>{p.name=v.name,p.weight=v.weight,p.num=v.num,p.gs=v.gs,p.dayDoze=v.dayDoze,p.schema=v.schema,p.points=ne(v.schema,v.activePoint),await ae(),await le(),n.add({severity:"success",summary:"Обновление успешно завершено",detail:`Данные питомца ${p.name} успешно обновлены`,life:3e3})}}):a.require({message:`Добавить нового питомца ${v.name}?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Отменить",severity:"secondary",outlined:!0},acceptProps:{label:"Добавить"},accept:async()=>{await Z(v,!1),n.add({severity:"success",summary:"Добавление завершено",detail:`Питомец ${v.name} добавлен`,life:3e3})}})}}function te(){return T.value.find((e=>e.id==N.value))}function ie(e){e.schema.push(e.schema.length+1,e.schema.length+2),e.points=ne(e.schema),ae()}function oe(e){e.schema.splice(e.schema.length-2,2),e.points=ne(e.schema),ae()}function ue(e,a){e.schema[a]=M+1,M++,B.value[a]=!0,M>=e.schema.length&&(M=0)}function ce(e=!1){const a=te(),n=a.points.find((e=>e.active));let l=a.schema.findIndex((e=>e==n.value));l++,l>=a.schema?.length&&(l=0);const t=a.points.find((e=>e.value==a.schema[l]));n.active=!1,t.active=!0,e||a.num++,ae()}return(0,t.sV)((async()=>{le()})),(e,a)=>((0,t.uX)(),(0,t.CE)("div",V,[(0,t.bF)((0,i.R1)(p.A),{value:N.value,"onUpdate:value":a[7]||(a[7]=e=>N.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(f.A),null,{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(T.value,((e,a)=>((0,t.uX)(),(0,t.Wv)((0,i.R1)(m.A),{key:a,value:e.id},{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(c.A),{value:e.num},{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(s.A),{label:e.name},null,8,["label"])])),_:2},1032,["value"])])),_:2},1032,["value"])))),128))])),_:1}),T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(h.A),{key:0},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(T.value,((e,n)=>((0,t.uX)(),(0,t.Wv)((0,i.R1)(g.A),{key:n,value:e.id},{default:(0,t.k6)((()=>[(0,t.Lk)("div",E,[a[20]||(a[20]=(0,t.Lk)("svg",{viewBox:"0 0 210 297",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},[(0,t.Lk)("path",{d:"M 209.05265,251.28502 C 196.24401,171.51603 158.327,6.3946197 158.32771,6.388979 c -0.46331,-2.56146 -2.31727,-4.4243387 -4.86629,-5.12292 -2.31736,-0.69853962 -5.09812,0 -6.9519,1.8628788 l -9.96443,10.0129672 c -6.9519,7.218664 -15.85882,17.117273 -26.05498,17.117273 -10.19616,0 -20.291082,-9.898609 -27.242996,-17.117273 L 73.282706,3.1289378 C 71.428924,1.266059 68.879818,0.56747783 66.330792,1.266059 c -2.549013,0.6985329 -4.402886,2.7943181 -4.866288,5.12292 0,0 -44.416077,162.926631 -59.0047257,243.111091 -1.52064919,76.02646 205.7395117,75.01994 206.5928717,1.78495 z",fill:"#444b54","clip-path":"none",style:{"stroke-width":"2.32294"}})],-1)),T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:0,class:"share-button",icon:"pi pi-qrcode",onClick:a[0]||(a[0]=e=>H(!!T.value?.length))})):(0,t.Q3)("",!0),(0,t.Lk)("div",O,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.points,((e,n)=>((0,t.uX)(),(0,t.CE)("div",{key:e.value,class:"app-injection-point"},[(0,t.bF)((0,i.R1)(c.A),{value:n+1},{default:(0,t.k6)((()=>[e.active?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:0,onClick:a[1]||(a[1]=e=>ce()),icon:"pi pi-check",rounded:""})):(0,t.Q3)("",!0),e.active?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:1,disabled:"true",icon:"pi pi-times",severity:"danger",rounded:""}))])),_:2},1032,["value"])])))),128))])])])),_:2},1032,["value"])))),128))])),_:1})):(0,t.Q3)("",!0),(0,t.bF)((0,i.R1)(k.A),{class:"app-footer"},{start:(0,t.k6)((()=>[T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.A),{key:0,label:`${G.value?.weight} kg`},null,8,["label"])):(0,t.Q3)("",!0)])),center:(0,t.k6)((()=>[T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(s.A),{key:0,label:`${(G.value?.weight*G.value?.dayDoze/G.value?.gs).toFixed(2)} ml`},null,8,["label"])):(0,t.Q3)("",!0)])),end:(0,t.k6)((()=>[T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:0,style:{"margin-right":"1rem"},icon:"pi pi-forward",onClick:a[2]||(a[2]=e=>ce(!1))})):(0,t.Q3)("",!0),T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:1,style:{"margin-right":"1rem"},label:"Пропустить",onClick:a[3]||(a[3]=e=>ce(!0))})):(0,t.Q3)("",!0),T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:2,style:{"margin-left":"auto"},class:"edit-button",icon:"pi pi-pencil",onClick:a[4]||(a[4]=e=>_.value=!0)})):(0,t.Q3)("",!0),(0,t.bF)((0,i.R1)(u.A),{style:{"margin-left":"1rem"},icon:"pi pi-plus",onClick:a[5]||(a[5]=e=>Z())}),T.value?.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,i.R1)(u.A),{key:3,style:{"margin-left":"auto"},icon:"pi pi-qrcode",onClick:a[6]||(a[6]=e=>H(!1))}))])),_:1})])),_:1},8,["value"]),(0,t.bF)((0,i.R1)(v.A),{visible:_.value,"onUpdate:visible":a[17]||(a[17]=e=>_.value=e),modal:"",header:"Редактировать питомца",style:{width:"25rem"}},{default:(0,t.k6)((()=>[T.value?.length?((0,t.uX)(),(0,t.Wv)((0,i.R1)(b.A),{key:0},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)((0,i.R1)(k.A),null,{start:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(G.value?.name),1)])),end:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(u.A),{icon:"pi pi-trash",onClick:a[8]||(a[8]=e=>ee(G.value?.id)),severity:"danger"})])),_:1}),(0,t.Lk)("div",z,[(0,t.bF)((0,i.R1)(r.A),null,{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(d.A),{id:"catName",modelValue:G.value.name,"onUpdate:modelValue":a[9]||(a[9]=e=>G.value.name=e)},null,8,["modelValue"]),a[21]||(a[21]=(0,t.Lk)("label",{for:"catName"},"Кличка",-1))])),_:1})]),(0,t.Lk)("div",D,[(0,t.bF)((0,i.R1)(r.A),null,{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(d.A),{id:"catWeight",modelValue:G.value.weight,"onUpdate:modelValue":a[10]||(a[10]=e=>G.value.weight=e)},null,8,["modelValue"]),a[22]||(a[22]=(0,t.Lk)("label",{for:"catWeight"},"Вес",-1))])),_:1})]),(0,t.Lk)("div",S,[(0,t.bF)((0,i.R1)(r.A),null,{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(d.A),{id:"catGS",modelValue:G.value.gs,"onUpdate:modelValue":a[11]||(a[11]=e=>G.value.gs=e)},null,8,["modelValue"]),a[23]||(a[23]=(0,t.Lk)("label",{for:"catGS"},"концентрация gs-441524",-1))])),_:1})]),(0,t.Lk)("div",U,[(0,t.bF)((0,i.R1)(r.A),null,{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(d.A),{id:"catdayDoze",modelValue:G.value.dayDoze,"onUpdate:modelValue":a[12]||(a[12]=e=>G.value.dayDoze=e)},null,8,["modelValue"]),a[24]||(a[24]=(0,t.Lk)("label",{for:"catdayDoze"},"доза на 1 кг",-1))])),_:1})]),(0,t.Lk)("div",K,[(0,t.bF)((0,i.R1)(r.A),null,{default:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(d.A),{id:"injectionCount",modelValue:G.value.num,"onUpdate:modelValue":a[13]||(a[13]=e=>G.value.num=e)},null,8,["modelValue"]),a[25]||(a[25]=(0,t.Lk)("label",{for:"injectionCount"},"Какая инъекция по счету",-1))])),_:1})]),(0,t.Lk)("div",Q,[(0,t.Lk)("ol",I,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(G.value?.points,((e,a)=>((0,t.uX)(),(0,t.CE)("li",{key:a},[(0,t.bF)((0,i.R1)(u.A),{label:(0,i.R1)(B)[a]?G.value.schema[a]:"*",onClick:e=>ue(G.value,a)},null,8,["label","onClick"])])))),128))]),(0,t.bF)((0,i.R1)(k.A),null,{start:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(u.A),{icon:"pi pi-minus",onClick:a[14]||(a[14]=e=>oe(G.value))})])),end:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(u.A),{icon:"pi pi-plus",onClick:a[15]||(a[15]=e=>ie(G.value))})])),_:1})])])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)((0,i.R1)(k.A),null,{end:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(u.A),{label:"Сохранить",onClick:a[16]||(a[16]=e=>ae(!0))})])),_:1})])),_:1},8,["visible"]),(0,t.bF)((0,i.R1)(v.A),{visible:L.value,"onUpdate:visible":a[19]||(a[19]=e=>L.value=e),modal:"",header:"Поделиться"},{default:(0,t.k6)((()=>[(0,t.Lk)("img",{src:X.value},null,8,q),(0,t.bF)((0,i.R1)(k.A),null,{end:(0,t.k6)((()=>[(0,t.bF)((0,i.R1)(u.A),{label:"Скопировать url",onClick:a[18]||(a[18]=e=>J())})])),_:1})])),_:1},8,["visible"]),(0,t.bF)((0,i.R1)(A.A)),(0,t.bF)((0,i.R1)(F.A))]))}};const T=N;var M=T,B=n(4458);(0,B.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var G=n(782),H=(0,G.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),J=n(8253),Y=n(288),Z=n(486),ee=n(1602);(0,l.Ef)(M).use(H).use(J.Ay,{theme:{preset:Y.A}}).use(Z.A).use(ee.A).mount("#app")}},a={};function n(l){var t=a[l];if(void 0!==t)return t.exports;var i=a[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(a,l,t,i){if(!l){var o=1/0;for(r=0;r<e.length;r++){l=e[r][0],t=e[r][1],i=e[r][2];for(var u=!0,c=0;c<l.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](l[c])}))?l.splice(c--,1):(u=!1,i<o&&(o=i));if(u){e.splice(r--,1);var s=t();void 0!==s&&(a=s)}}return a}i=i||0;for(var r=e.length;r>0&&e[r-1][2]>i;r--)e[r]=e[r-1];e[r]=[l,t,i]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var l in a)n.o(a,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(a){return 0===e[a]};var a=function(a,l){var t,i,o=l[0],u=l[1],c=l[2],s=0;if(o.some((function(a){return 0!==e[a]}))){for(t in u)n.o(u,t)&&(n.m[t]=u[t]);if(c)var r=c(n)}for(a&&a(l);s<o.length;s++)i=o[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(r)},l=self["webpackChunkfip_warrior_app"]=self["webpackChunkfip_warrior_app"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=n.O(void 0,[504],(function(){return n(2406)}));l=n.O(l)})();
//# sourceMappingURL=app.99d72050.js.map